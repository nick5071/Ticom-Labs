@model IEnumerable<Laboratorio_projeto.Models.Pessoas>


<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
    body {
        font-family: 'Inter', sans-serif;
        background-color: #f9fafb;
    }

    .navbar-modern {
        background: linear-gradient(to right, #007cf0, #00dfd8);
        color: white;
    }

    .navbar-shadow {
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    .container {
        max-width: 900px;
        margin: 0 auto;
    }

    .form-control {
        border-radius: 0.5rem;
        transition: all 0.2s ease;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    }

        .form-control:focus {
            border-color: #007cf0;
            box-shadow: 0 0 0 0.2rem rgba(0, 124, 240, 0.25);
        }

    .btn-primary {
        background: linear-gradient(to right, #007cf0, #00dfd8);
        border: none;
    }

        .btn-primary:hover {
            opacity: 0.9;
        }

    .btn-danger {
        background-color: #f44336;
        border: none;
    }

        .btn-danger:hover {
            opacity: 0.9;
        }

    .table thead th {
        background-color: #e8f1fa;
        font-weight: 600;
    }

    .table {
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        border-radius: 8px;
        overflow: hidden;
    }

    .alert {
        margin-top: 1rem;
    }
</style>



<div class="container">
    @if (TempData["Mensagem"] != null)
    {
        <div class="alert alert-danger">@TempData["Mensagem"]</div>
    }
    <form asp-controller="Home" asp-action="Buscar" method="get" class="no-print mt-3 mb-4">
        <div class="form-group">
            <label for="cpfInput">CPF</label>
            <input maxlength="11" class="form-control" id="cpfInput" placeholder="Insira o CPF" name="cpf" />
        </div>
        <div class="d-flex gap-3 mt-3">
            <button class="btn btn-primary" type="submit">Buscar</button>
            <button class="btn btn-secondary" type="button" onclick="window.print()">Imprimir Tabela</button>
        </div>
    </form>

    @if (Model != null && Model.Any())
    {
        <div class="table-responsive">
            <table class="table table-bordered" id="tabela-usuarios">
                <thead>
                    <tr>
                        <th>CPF</th>
                        <th>Nome</th>
                        <th>Telefone</th>
                        <th>Convênio</th>
                        <th>Exames</th>
                        <th class="no-print">Ações</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var pessoa in Model)
                    {
                        <tr>
                            <td>@pessoa.CPF</td>
                            <td>@pessoa.Nome</td>
                            <td>@pessoa.Telefone</td>
                            <td>@pessoa.Convenio</td>
                            <td>
                                @if (pessoa.ExamesMarcados != null && pessoa.ExamesMarcados.Any())
                                {
                                    foreach (var exame in pessoa.ExamesMarcados)
                                    {
                                        <div>@string.Join(", ", exame.Exames)</div>
                                    }
                                }
                                else
                                {
                                    <span>Nenhum exame marcado</span>
                                }
                            </td>
                            <td class="no-print">
                                <form asp-action="Excluir" asp-controller="Home" method="post" onsubmit="return confirm('Tem certeza que deseja excluir este usuário?');">
                                    <input type="hidden" name="cpf" value="@pessoa.CPF" />
                                    <button type="submit" class="btn btn-danger btn-sm">Excluir</button>
                                </form>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else
    {
        <p class="mt-4">Nenhum usuário informado.</p>
    }
</div>
